
@{
    ViewBag.Title = "Projects";
    Layout = "~/Views/Shared/_LayoutAdmin.cshtml";
}


<div class="row">
    <div class="col-md-6">
        <h2>Projects Panel</h2>
    </div>
    <div class="col-md-6 pull-right">
        @Html.ActionLink("Create Project", "CreateProject",null,new { @class="btn btn-primry"})
    </div>
</div>
<table id="acountTbl" class="table table-striped table-bordered" style="width:100%">
    <thead>
        <tr>
            <th>Sr. No</th>
            <th>Name</th>
            <th></th>
        </tr>
    </thead>
    <tbody id="acountTblDiv"></tbody>
</table>
<script>
    window.onload = function () { loadProjects(); };
    function getUrlParameter(name) {
        name = name.replace(/[\[]/, '\\[').replace(/[\]]/, '\\]');
        var regex = new RegExp('[\\?&]' + name + '=([^&#]*)');
        var results = regex.exec(location.search);
        return results === null ? '' : decodeURIComponent(results[1].replace(/\+/g, ' '));
    };
    function loadProjects() {
       
        //var usertype =getUserTypeValue(getUrlParameter('usertype'));
        $.ajax({
            url: "/Admin/ProjectsList",
            type: "GET",
            //data: { usertype: usertype},
            contentType: "application/json;charset=utf-8",
            dataType: "json",
            success: function (comps) {
                var html = '',count=1;
                $.each(comps, function (key, item) {

                    html += '<tr "> ';
                    html += ' <td>' + count + '</td>';
                    html += ' <td>' + item.name + '</td>';
                    html += ' <td><a target="_blank" href="/Admin/EditProject/?id=' + item.id + '" class="btn btn-primary btn-xs"><span class="glyphicon glyphicon-pencil"></span> Edit</a> </td>';
                    html += ' </tr>';
                    count++;
                });
                $('#acountTblDiv').html(html);
               // $('#acountTbl').DataTable();
            },
            error: function (errormessage) {
                alert(errormessage.responseText);
            }
        });
    }


    function getUserTypeValue(user) {
        if (user == 'Admin')
            return 0;
        else if (user == 'Trainer' || user =='Trainers')
            return 1;
        else if (user == 'Member' || user == 'Members')
            return 2;
        else
            return -1;
    }

    function getUserType(user) {
        if (user == 0)
            return 'Admin';
        else if (user == 1)
            return 'Trainer';
        else if (user == 2)
            return 'Member';

    }
</script>

